import { nanoid } from 'nanoid'
import dayjs from '../utils/dates'

const iso = (value) => dayjs(value).format('YYYY-MM-DD')
const today = dayjs()

const daysUntil = (weekday) => (weekday - today.day() + 7) % 7
const upcoming = (weekday) => iso(today.add(daysUntil(weekday), 'day'))

export const defaultTasks = [
  {
    id: nanoid(),
    title: 'Clean litter box',
    description: 'Scoop, refresh litter, and wipe mat area.',
    duration: 20,
    recurrence: { mode: 'gap', gapDays: 2 },
    nextDueDate: iso(today),
    window: 'morning',
    allowDuringWork: true,
    allowSplit: false,
    autop: true,
    priority: 'high',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Water plants',
    description: 'Balcony + desk planters; check moisture sensors.',
    duration: 20,
    recurrence: { mode: 'gap', gapDays: 2 },
    nextDueDate: iso(today),
    window: 'morning',
    allowDuringWork: false,
    allowSplit: false,
    autop: true,
    priority: 'high',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Clean robot vacuum',
    description: 'Empty bin, clean brushes, wipe sensors.',
    duration: 25,
    recurrence: { mode: 'gap', gapDays: 7 },
    nextDueDate: iso(today.add(1, 'day')),
    window: 'evening',
    allowDuringWork: false,
    allowSplit: false,
    autop: true,
    priority: 'medium',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Meal prep session',
    description: 'Cook base meal for 2-3 days; prep chapati dough.',
    duration: 90,
    recurrence: { mode: 'gap', gapDays: 3 },
    nextDueDate: iso(today),
    window: 'evening',
    allowDuringWork: false,
    allowSplit: true,
    autop: true,
    priority: 'medium',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Codeforces upsolve',
    description: 'Work through practice set / CTF prep.',
    duration: 90,
    recurrence: { mode: 'gap', gapDays: 3 },
    nextDueDate: iso(today.add(1, 'day')),
    window: 'evening',
    allowDuringWork: false,
    allowSplit: true,
    autop: true,
    priority: 'medium',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Laundry + folding',
    description: 'Full cycle, fold, and put away clothes.',
    duration: 70,
    recurrence: { mode: 'weekly', days: [6] },
    nextDueDate: upcoming(6),
    window: 'afternoon',
    allowDuringWork: false,
    allowSplit: false,
    autop: true,
    priority: 'low',
    notesEnabled: true,
  },
  {
    id: nanoid(),
    title: 'Deep clean workspace',
    description: 'Declutter desk, wipe shelves, reset cable tray, and vacuum corners.',
    duration: 180,
    recurrence: { mode: 'floating' },
    nextDueDate: null,
    window: 'any',
    autoSplit: true,
    maxChunkMinutes: 60,
    remainingDuration: 180,
    allowDuringWork: false,
    autop: true,
    priority: 'medium',
    notesEnabled: true,
  },
]
